---
title: Denotational Semantics of Typed Lambda Calculus III â€” Domain-Theoretic Models
date: 2024-07-10 02:52:00 +500
math: true
categories: [Theory, Programming Language]
tags: [note, lang-en, PL]
---

## Fixed Points and the Full Continuous Hierarchy

Our current motivation for studying domain-theoretic models is to construct Henkin models  of typed lambda calculi with fixed-point operators.

The type frame, $\mathcal{A}$, called the **full continuous** $\lambda^{\times, \to}$ **hierarchy over** CPOs $\langle A^{b_0} ,\leq_0 \rangle , ... , \langle A^{b_k} ,\leq_k \rangle$ is defined by taking $A^{b_0}, ..., A^{b_k}$ as base types, and

$$
\begin{split}
&A^{\sigma \times \tau} = A^{\sigma} \times A^{\tau} \\
&A^{\sigma \to \tau} = \text{ all continuous } f: \langle A^{\sigma} ,\leq_\sigma \rangle \to \langle A^{\tau} ,\leq_\tau \rangle
\end{split}
$$

with $A^{\sigma \times \tau}$ ordered coordinate-wise by $\leq_{\sigma \times \tau}$ and $A^{\sigma \to \tau}$ ordered point-wise by $\leq_{\sigma \to \tau}$. By Lemma 1 and Lemma 4 in the last article, each $\langle A^{\sigma} ,\leq_\sigma \rangle$ is a CPO.

The main result of this section is that the full continuous type hierarchy over any CPOs forms a Henkin model, with least-fixed-point operators at all pointed types. Before proving that the full continuous hierarchy is a Henkin model, we consider the interpretation of $fix$.

We say $a$ is a **least fixed point** of $f$ if $a = f(a)$ and, whenever $b = f(b)$, we have $a \leq b$.

**(Lemma 1.)** If $\mathcal{D}$ is a pointed CPO, and $f:\mathcal{D} \to \mathcal{D}$ is continuous, then $f$ has a least fixed point

$$ fix_D \: f = \bigvee \{ f^n(\perp) \mid n \geq 0 \}.$$

In addition, the map $fix_D$ is a continuous function.

> This lemma says that we can find the least fixed point of any function $f$ by repreatedly applying $f$ to the least element of its domain.
{: .prompt-tip}

**(Proof.)** Let $f:\mathcal{D} \to \mathcal{D}$ be continuous. Since $f$ is monotonic, and $\perp \leq f(\perp)$, we can see that $f^n(\perp) \leq f^{n+1}(\perp)$. It follows that $$ \{ f^n(\perp) \mid n \geq 0 \}$$ is linearly ordered and therefore directed. Let $a$ be the least upper bound $$a = \bigvee \{ f^n(\perp) \mid n \geq 0 \}$$.

We must show that $a$ is a fixed point of $f$. By continuity of $f$,

$$
\begin{split}
f(a) &= f(\bigvee \{ f^n(\perp) \mid n \geq 0 \})\\
&= \bigvee \{ f^{n+1}(\perp) \mid n \geq 0 \}.
\end{split}
$$

Since $$\{ f^n(\perp) \mid n \geq 0 \}$$ and $$\{ f^{n+1}(\perp) \mid n \geq 0 \}$$ have the same least upper bound, we have $f(a) = a$.

To see that $a$ is the least fixed point of $f$, suppose $b = f(b)$ is any fixed point. Since $\perp \leq b$, we have $f(\perp) \leq f(b)$ and similarly $f^n(\perp) \leq f^n(b)$ for any $n \geq 0$. But since $b$ is a fixed point of $f$, $f^n(b) = b$. Therefore $b$ is an upper bound for the set $$\{ f^n(\perp) \mid n \geq 0 \}$$. Since the least upper bound of this set is $a$, it follows that $a \leq b$.

The final step is to show that the function $fix_D$ mapping $f$ to $$\{ f^n(\perp)\}$$ is itself continuous. Let us suppose that $S \subseteq D \to D$ is directed, with $\bigvee S = f$. We must show that $$fix_D \: f = \bigvee \{ fix_D \: g \mid g \in S \}$$. By continuity of function application, each $f^n(\perp)$ is the least upper bound of the set of all $g^n(\perp)$ with $g \in S$. Therefore,

$$
\begin{split}
fix_D \: f &= \bigvee \{ f^n(\perp) \mid n \geq 0 \}\\
&= \bigvee \{ g^{n}(\perp) \mid n \geq 0 ,\: g \in S \}.
\end{split}
$$

It is easy to see that $$\{ g^{n}(\perp) \mid n \geq 0 ,\: g \in S \}$$ and $$\{ fix_D \: g \mid g \in S \}$$ have the same least upper bound, since any upper bound for the $g^n(\perp)$'s must be an upper bound for the $$(fix_D \: g)$$'s. Therefore,


$$
fix_D \: f = \bigvee \{ fix_D \: g \mid g \in S \}.
$$

This proves the lemma. $\blacksquare$


A trivial example is $fix$ $id$, where $id:\mathcal{D} \to \mathcal{D}$ is the identity function on the pointed CPO $\mathcal{D}$. We can calculate the least fixed point of $id$ as follows.

$$
\begin{split}
fix \: id &= \bigvee \{ id^n(\perp_D) \mid n \geq 0 \} \\
&= \bigvee \{ \perp_D \} \\
&=  \perp_D  
\end{split}
$$

This calculation clearly gives the right answer, since $\perp$ is a fixed point of the identity function, and no element of $\mathcal{D}$ is less than $\perp$.

**(Theorem 1.)** The full continuous hierarchy over any collection of CPOs is a Henkin model.

**(Proof.)** It is easy to see that the full continuous hierarchy for $\lambda^{\times, \to}$ is an extensional applicative structure. 

We prove that the environment model condition is satisfied using an induction hypothesis that is slightly stronger than the theorem. Specifically, in addition to showing that the meaning of every term exists, we show that the meaning is a continuous function of values assigned to free variables by the environment. We use the assumption that meanings are continuous to show that a function defined by lambda abstraction is continuous.

We say $$[\![ \Gamma \: \triangleright \: M:\tau ] \!]$$ is **continuous** if, for every $x:\sigma \in \Gamma$ and $\eta \vDash \Gamma$, the map

$$a \in A^\sigma \mapsto [\![ \Gamma \: \triangleright \: M:\tau ] \!]\eta[x \mapsto a]$$

is a continuous function from $A^\sigma$ to $A^\tau$.

> This is the same as saying $$[\![ \Gamma \: \triangleright \: M:\tau ] \!]$$ is continuous as an $n$-ary function $A^{\sigma_1} \times ... \times A^{\sigma_n} \to A^\tau$, where $$\Gamma = \{ x_1,\sigma_1, ..., x_n,\sigma_n\}$$.
{: .prompt-tip}